<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order History - Fresh & Healthy</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: #f4f8fb;
            margin: 0;
            min-height: 100vh;
        }
        .container {
            max-width: 900px;
            margin: 2.5rem auto;
            padding: 0 1rem;
        }
        h1 {
            color: #2e7d32;
            font-weight: 700;
            margin-bottom: 2rem;
            text-align: center;
        }
        .order-card {
            background: #fff;
            border-radius: 14px;
            box-shadow: 0 4px 18px rgba(44,62,80,0.08);
            margin-bottom: 2rem;
            padding: 1.5rem 1.5rem 1.2rem 1.5rem;
            transition: box-shadow 0.2s;
            border: none;
            position: relative;
        }
        .order-card:hover {
            box-shadow: 0 8px 32px rgba(44,62,80,0.16);
        }
        .order-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.7rem;
        }
        .order-header .order-id {
            font-weight: 600;
            color: #1b5e20;
            font-size: 1.1rem;
        }
        .order-header .order-date {
            color: #6c757d;
            font-size: 0.98rem;
        }
        .order-status {
            font-size: 1rem;
            font-weight: 600;
            padding: 0.35em 1em;
            border-radius: 20px;
            display: inline-block;
        }
        .status-processing { background: #fff3cd; color: #856404; }
        .status-shipped { background: #cce5ff; color: #004085; }
        .status-delivered { background: #d4edda; color: #155724; }
        .status-cancelled { background: #f8d7da; color: #721c24; }
        .delivery-estimate {
            color: #388e3c;
            font-size: 1.05rem;
            margin-bottom: 0.5rem;
        }
        .order-items-list {
            margin: 0.5rem 0 0 0;
            padding: 0;
            list-style: none;
        }
        .order-items-list li {
            font-size: 1rem;
            color: #444;
        }
        .order-total {
            font-weight: 600;
            color: #2e7d32;
            margin-top: 0.5rem;
            font-size: 1.1rem;
        }
        .view-details-btn {
            position: absolute;
            right: 1.5rem;
            bottom: 1.2rem;
            background: #2e7d32;
            color: #fff;
            border: none;
            border-radius: 8px;
            padding: 0.5em 1.2em;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.18s;
        }
        .view-details-btn:hover {
            background: #1b5e20;
        }
        .empty-orders {
            text-align: center;
            margin: 5rem 0 3rem 0;
        }
        .empty-orders h2 {
            color: #2e7d32;
            margin-bottom: 1rem;
        }
        .empty-orders .cta-button {
            margin-top: 1.5rem;
        }
        /* Modal */
        .modal-lg { max-width: 700px; }
        .modal-body { background: #f8f9fa; }
        .order-detail-table th, .order-detail-table td { padding: 0.5rem 1rem; }
        .order-detail-table th { background: #e0f2f1; color: #00695c; }
        .order-detail-table td { background: #fff; }
        .order-detail-section { margin-bottom: 1.2rem; }
        .order-detail-section strong { color: #2e7d32; }
        @media (max-width: 600px) {
            .order-card { padding: 1rem; }
            .view-details-btn { right: 1rem; bottom: 1rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Order History</h1>
        <div id="orders-list"></div>
        <div class="empty-orders" id="empty-orders" style="display:none;">
            <h2>No orders yet</h2>
            <p>You haven't placed any orders. Start shopping now!</p>
            <a href="home_page.html" class="btn btn-success cta-button">Go to Storefront</a>
        </div>
    </div>

    <!-- Order Detail Modal -->
    <div class="modal fade" id="orderDetailModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Order Details</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body" id="orderDetailBody">
            <!-- Populated by JS -->
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
    // Mock order data
    const orders = [
      {
        id: 1012,
        created_at: '2025-07-10 14:22',
        status: 'Processing',
        delivery_estimate: 'Arriving by July 15',
        items: [
          { product_name: 'Alphonso Mango', qty: 2, price: 299 },
          { product_name: 'Fresh Coconut Water', qty: 1, price: 99 }
        ],
        grand_total: 697,
        shipping_address: '123, Green Avenue, Mumbai, MH',
        payment_method: 'Credit Card',
        tracking: 'https://track.example.com/1012',
        subtotal: 697,
        shipping: 0,
        taxes: 0,
        invoice: 'invoices/invoice_12.pdf'
      },
      {
        id: 1009,
        created_at: '2025-06-28 09:10',
        status: 'Delivered',
        delivery_estimate: 'Delivered on July 1',
        items: [
          { product_name: 'Dry Figs', qty: 1, price: 499 },
          { product_name: 'Fresh Orange Juice', qty: 3, price: 120 }
        ],
        grand_total: 859,
        shipping_address: '123, Green Avenue, Mumbai, MH',
        payment_method: 'UPI',
        tracking: 'https://track.example.com/1009',
        subtotal: 859,
        shipping: 0,
        taxes: 0,
        invoice: 'invoices/invoice_9.pdf'
      }
    ];

    function statusBadge(status) {
      const s = status.toLowerCase();
      if (s === 'processing') return '<span class="order-status status-processing">Processing</span>';
      if (s === 'shipped') return '<span class="order-status status-shipped">Shipped</span>';
      if (s === 'delivered') return '<span class="order-status status-delivered">Delivered</span>';
      if (s === 'cancelled') return '<span class="order-status status-cancelled">Cancelled</span>';
      return '<span class="order-status status-processing">' + status + '</span>';
    }

    function renderOrders() {
      const list = document.getElementById('orders-list');
      const empty = document.getElementById('empty-orders');
      if (!orders.length) {
        list.style.display = 'none';
        empty.style.display = '';
        return;
      }
      list.style.display = '';
      empty.style.display = 'none';
      list.innerHTML = orders.map(order => `
        <div class="order-card">
          <div class="order-header">
            <div>
              <span class="order-id">Order #${order.id}</span>
              <span class="order-date ms-3"><i class="fas fa-calendar-alt"></i> ${order.created_at}</span>
            </div>
            <div>${statusBadge(order.status)}</div>
          </div>
          <div class="delivery-estimate"><i class="fas fa-truck"></i> ${order.delivery_estimate}</div>
          <ul class="order-items-list">
            ${order.items.map(it => `<li>${it.product_name} × ${it.qty} — ₹${it.price}</li>`).join('')}
          </ul>
          <div class="order-total">Total: ₹${order.grand_total}</div>
          <button class="view-details-btn" onclick="showOrderDetail(${order.id})">View Details</button>
        </div>
      `).join('');
    }

    function showOrderDetail(orderId) {
      const order = orders.find(o => o.id === orderId);
      if (!order) return;
      document.getElementById('orderDetailBody').innerHTML = `
        <div class="order-detail-section"><strong>Order #${order.id}</strong> | Placed: ${order.created_at}</div>
        <div class="order-detail-section">Status: ${statusBadge(order.status)}</div>
        <div class="order-detail-section"><strong>Delivery:</strong> ${order.delivery_estimate}</div>
        <div class="order-detail-section"><strong>Shipping Address:</strong><br>${order.shipping_address}</div>
        <div class="order-detail-section"><strong>Payment Method:</strong> ${order.payment_method}</div>
        <div class="order-detail-section"><strong>Tracking:</strong> <a href="${order.tracking}" target="_blank">Track Package</a></div>
        <table class="table table-bordered order-detail-table mt-3"><thead><tr><th>Item</th><th>Price</th><th>Qty</th><th>Subtotal</th></tr></thead><tbody>
          ${order.items.map(it => `<tr><td>${it.product_name}</td><td>₹${it.price}</td><td>${it.qty}</td><td>₹${it.price * it.qty}</td></tr>`).join('')}
        </tbody></table>
        <div class="order-total">Subtotal: ₹${order.subtotal}<br>Shipping: ₹${order.shipping}<br>Taxes: ₹${order.taxes}<br><strong>Grand Total: ₹${order.grand_total}</strong></div>
        <a href="${order.invoice}" class="btn btn-success mt-3" target="_blank"><i class="fas fa-file-invoice"></i> Download Invoice</a>
      `;
      var modal = new bootstrap.Modal(document.getElementById('orderDetailModal'));
      modal.show();
    }

    renderOrders();
    </script>
</body>
</html> 